# xiaomi-fcm-delay-investigation
Investigation notes on FCM push notification delays under Xiaomi HyperOS.
關於 Xiaomi HyperOS 下 FCM 推送延遲的解決方法整理與實測

本文整理並實測多種網路上流傳之解決方案，用以改善 Xiaomi HyperOS 系統中 FCM（Firebase Cloud Messaging）推送通知延遲的問題。

一、結論摘要

整體而言，多數方法在本次測試環境中 效果有限，僅部分方式能在特定情境下改善延遲問題，且部分方法伴隨明顯風險，需審慎評估。

二、測試環境

裝置：Redmi Note 12 Turbo

作業系統：Xiaomi HyperOS 1.0.3.0（中國版 ROM）

三、重要提醒與聲明

在嘗試以下任何方法前，請**務必先完整備份手機資料**

因執行本文所述方法而導致的任何系統異常、資料遺失或其他損失，需由使用者自行承擔，**本文作者不負任何法律責任**

本文部分內容整理自網路公開資料，如有侵權請聯繫 ab520025tim0508@gmail.com

四、各方法說明與實測結果

方法一：以國際版「電量與效能」取代中國版

資料來源：
https://m.mobile01.com/topicdetail.php?f=634&t=6892724

（感謝 ruler2003 提供相關方法）

方法說明：
於國際版 ROM 裝置中，透過 Google Play 安裝 APK Extractor，擷取「電量與效能」應用程式，並將該 APK 傳送至中國版 ROM 裝置進行安裝，嘗試覆蓋原有系統應用。

實測結果：

安裝失敗，系統顯示錯誤畫面，無法完成覆蓋。
![1908f2a809a3e2ab6fa6f71d7d8cec0d1442759421](https://github.com/user-attachments/assets/b2b0e998-3f54-434c-9026-ec8e99e77ed9)
*圖 1：嘗試以國際版應用覆蓋中國版時的錯誤畫面*

方法二：使用「小黑屋」凍結「電量與效能」

方法說明：
透過 ADB 連線搭配「小黑屋」嘗試凍結系統內建的「電量與效能」應用程式，以避免其干預背景行為。

實測結果：

無法成功凍結該應用程式，原因未知。
推測原因：系統可能對該應用設有**白名單管理**、**特定權限限制**，或有**底層系統保護機制**，導致凍結操作無效。

方法三：安裝 Heartbeat Fixer for GCM

方法說明：
該應用程式可調整裝置與 Google GCM / FCM 伺服器之間的連線頻率，以維持背景連線狀態。
可直接於 Google Play 商店下載。

實測結果：

推送延遲情況略有改善，但仍存在延遲，效果有限。

方法四：解除安裝「電量與效能」系統應用

資料來源：
https://m.mobile01.com/topicdetail.php?f=634&t=6892724

（感謝 Ian.980010 提供相關方法）

方法說明：
透過 ADB 指令解除安裝「電量與效能」系統應用程式。

實測結果：

本次未實際測試。

根據評論回饋，部分使用者表示有效，但裝置重新開機後需重新操作。

此方法具有一定風險，不建議一般使用者嘗試。

方法五：於開發者模式中關閉「系統最佳化」

資料來源：
https://m.mobile01.com/topicdetail.php?f=634&t=6895799

（感謝 adsl86 提供相關方法）

操作路徑：
我的裝置 → 全部參數與資訊 → OS 版本（連續點擊 10 次）
→ 開啟開發者模式 → 更多設定 → 開發者選項 → 關閉系統最佳化

實測結果：

推送延遲問題明顯改善。

但系統 UI 外觀發生變化（例如桌布重置），且部分系統級應用可能無法正常運作。

方法六：將需要即時推送的應用程式縮為浮動小視窗

資料來源：
https://m.mobile01.com/topicdetail.php?f=634&t=6892724&p=1

（感謝 StarWalker 提供相關方法）

方法說明：
將目標應用程式維持於浮動小視窗狀態，以避免系統回收背景程序。

實測結果：

相對安全，且在多數情況下有效。

偶爾仍會出現推送失效的情形。

五、總結

在 Xiaomi HyperOS 環境下，FCM 推送延遲問題與系統電源管理及背景限制高度相關。目前尚無完全穩定且無風險的解決方案，使用者需在 穩定性、風險與便利性之間自行取捨。
